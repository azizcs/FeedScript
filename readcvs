
Updated Flow Steps
1-6. Existing Steps (Same as before)
Trigger, HTML to Text, and all Compose actions

SharePoint "Create file" action

7. New Action: Send Email with Attachment
Action: Send an email (V2) (Office 365 Outlook connector)
Name: *"7. Email CSV attachment to SQL-DB team"*
Settings:

To: sql-db@td.com

Subject:

plaintext
Disk Health Report - @{formatDateTime(utcNow(), 'MMMM dd, yyyy')}
Body:

plaintext
Hello SQL-DB Team,

Attached is the latest disk health prediction report generated by the Dynatrace workflow.

Processed on: @{formatDateTime(utcNow(), 'F')}
Total records: [Add dynamic count if possible]

This is an automated message from the Power Automate workflow.

Best regards,
MLaaS Automation
Attachments - Name:

plaintext
DiskHealth_@{formatDateTime(utcNow(), 'yyyy-MM-dd_HHmm')}.csv
Attachments - Content: Output from "5. Add standardized CSV headers"
(Note: Use the same content that was saved to SharePoint)




Add Record Count: Include the number of disk entries in the email body:

plaintext
Total records processed: @{length(split(outputs('4._Remove_quotes_fix_spaces'), '
'))}
